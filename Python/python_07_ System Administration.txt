Python for System Administration


What is system administration?

Is also known as SysAdmin 
Is the management of hardware and software systems
Ensures that computer systems and all related services are working well
Includes these common tasks:

	•Installation of new hardware or software
	•Creating and managing user accounts
	•Maintaining computer systems, such as servers and databases
	•Planning and properly responding to system outages and various other problems
	
How could you use Python to make system administration tasks easier?

	Python is one of the best tool for system administrtion, especilly on linux/windows servers. it can automated repetitive work, reduce errors and save a huge amount of time
	
Increase efficiency
Shows that systems are stable and working smoothly
Identify and resolve problems before the business is affected

------

---
import os

def new_user():
    confirm = "N"
    
    while confirm != "Y":
        username = input("Enter thename of the user to add: ")
        
        print(f"Use the username ' {username}  '? (Y/N)") 
        
        confirm = input().upper()

    os.system(f"sudo adduser  {username}")
    
new_user()
-------
import os

def remove_user():
    confirm = "N"
    
    while confirm != "Y":
        username = input("Enter the name of the user to remove: ")
        print("Remove the user '" + username + "'? (Y/N)")
        confirm = input().upper()
        
    os.system("sudo userdel " +  username) 
    
remove_user()    
---

import subprocess
import os
def add_user_to_group():
    username = input("Enter the name of the user that you wantto addto agroup: ")
    output = subprocess.check_output("cut -d: -f1 /etc/group", shell=True)
    group_list = output.decode("utf-8")
    
    print("Enter a list of groups to add the user to")
    print("The list should be separatedby spaces, for example: group1 group2 group3")
    print("The available groups are:\r\n " + group_list)
    
    chosenGroups = input("Groups: ")
    
    command =f"sudo usermod -aG {chosenGroups} {username}"
    print(f"Running: {command}")
    os.system(command)
   
    print(f"User '{username}' added to group(s): {chosenGroups}")

add_user_to_group()   

----------------------
os.system() versus subprocess.run()

•It runs in a subshell, which is usually Bash on Linux.
•Shell takes the given string and interprets the escape characters.
–Example: os.system(“python –version”)

•By default, it does not use a shell. Instead, it tries to run a program with the given string as a name.
•You must pass in a list to run a command with arguments.
–Example: subprocess.run([“python”,”-version”]

Why is subprocess.run() better than os.system()?

subprocess.run() is better than os.system() for the following reasons:

* Safety
	Developers often pass an input string to os.system() without checking the actual commands. 
	This practice can be dangerous. For example, a malicious user can pass in a string to delete your files
* Separate process 
	subprocess.run()is implemented by a class that is called Popen, which is run as a separate process
* Additional functionality
	Because subprocess.run()is really the Popen class, it has useful, new methods such as poll(), wait(), and terminate()
	
What is system administration?
	System administration is the management of hardware or software systems, including configuration, upgrades, reliability, and security.
	
Name one common task that is associated with system administration.
		•Performing backups
		•Archiving log files
		•Automating repetitive tasks 
		
Name one benefit of system administration.
	System administration keeps systems running smoothly, and helps to ensure that IT resources are available to meet business needs. 
	